# ─────────────────────────────────────────────────────────
#  JUNI BACKEND — Environment Variables
#  Copy to .env and fill in real values.
#  NEVER commit .env to version control.
# ─────────────────────────────────────────────────────────

# ── Server ──────────────────────────────────────────────
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:5173

# ── Database (PostgreSQL) ────────────────────────────────
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://juni:changeme@localhost:5432/juni_dev?schema=public

# ── JWT ─────────────────────────────────────────────────
# Generate with: openssl rand -hex 64
JWT_ACCESS_SECRET=replace_with_64_byte_hex_secret
JWT_REFRESH_SECRET=replace_with_different_64_byte_hex_secret
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d

# ── Checkr Background Checks ────────────────────────────
# Account: https://dashboard.checkr.com → Settings → API Keys
# Use TEST key for dev, LIVE key for production
CHECKR_API_KEY=test_your_checkr_api_key_here
CHECKR_WEBHOOK_SECRET=your_checkr_webhook_secret
# Set up webhook in Checkr Dashboard → Webhooks → Add Endpoint
# URL: https://your-domain.com/webhooks/checkr

# ── Stripe Payments ──────────────────────────────────────
# Account: https://dashboard.stripe.com → Developers → API Keys
# Test keys start with sk_test_, live with sk_live_
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret
# CLI: stripe listen --forward-to localhost:3001/webhooks/stripe
# Dashboard: Developers → Webhooks → Add Endpoint
# URL: https://your-domain.com/webhooks/stripe
# Events: customer.subscription.*, invoice.*, transfer.*, account.*

# Stripe Product IDs (create in Stripe Dashboard → Products)
STRIPE_PRICE_ESSENTIALS=price_essentials_id
STRIPE_PRICE_PREMIUM=price_premium_id
STRIPE_PRICE_LEGACY=price_legacy_id

# ── SendGrid Email ───────────────────────────────────────
# Account: https://app.sendgrid.com → Settings → API Keys → Create
# Verify your sender domain under Sender Authentication
SENDGRID_API_KEY=SG.your_sendgrid_api_key
SENDGRID_FROM_EMAIL=no-reply@juni.care
SENDGRID_FROM_NAME=Juni
# Template IDs (create in SendGrid → Email API → Dynamic Templates)
SENDGRID_TEMPLATE_WELCOME_FAMILY=d-template_id
SENDGRID_TEMPLATE_WELCOME_COMPANION=d-template_id
SENDGRID_TEMPLATE_VERIFY_EMAIL=d-template_id
SENDGRID_TEMPLATE_PASSWORD_RESET=d-template_id
SENDGRID_TEMPLATE_VISIT_REMINDER=d-template_id
SENDGRID_TEMPLATE_BLOOM_DIGEST=d-template_id
SENDGRID_TEMPLATE_BG_CHECK_COMPLETE=d-template_id

# ── Twilio SMS ───────────────────────────────────────────
# Account: https://console.twilio.com → Account Info
TWILIO_ACCOUNT_SID=ACyour_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+15551234567
# Twilio Proxy Service SID (for masked phone numbers)
# Create at: console.twilio.com → Proxy → Services → Create
TWILIO_PROXY_SERVICE_SID=KSyour_proxy_service_sid

# ── AWS S3 File Storage ───────────────────────────────────
# Account: https://console.aws.amazon.com → IAM → Users → Create User
# Policy: AmazonS3FullAccess (scope to specific bucket in production)
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_REGION=us-east-1
AWS_S3_BUCKET=juni-production
# Presigned URL expiry (seconds) — 1 hour default
AWS_S3_PRESIGN_EXPIRY=3600

# ── Anthropic AI (Daily Bloom + Insights) ────────────────
# Account: https://console.anthropic.com → API Keys → Create
ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key

# ── Email Verification ───────────────────────────────────
# Generate with: openssl rand -hex 32
EMAIL_VERIFICATION_SECRET=replace_with_32_byte_hex_secret
PASSWORD_RESET_SECRET=replace_with_different_32_byte_hex_secret
PASSWORD_RESET_EXPIRY_MINUTES=60
